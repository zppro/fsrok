
form.form-validate.mb-lg(role='form', name="theForm", novalidate='', ng-submit="vm.doSubmit()")
    .panel
        tabset(justified="true")
            tab(active="vm.tab1.active")
                tab-heading
                    | {{ vm.viewTranslatePath('TAB1') | translate}}
                    span.text-danger(title="{{'validator.FIELD-INVALID'|translate}}" , ng-show="utils.vtab('contentTab1')")
                        i.glyphicon.glyphicon-minus-sign
                div#contentTab1
                    fieldset: .form-group
                        <!--姓名-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-LABEL-NAME') | translate}}:
                        .col-md-10(ng-if="!vm.readonly")
                            input.form-control(type='text', name='name',ng-model='vm.model.name',placeholder='{{vm.viewTranslatePath("TAB1-PLACEHOLDER-NAME")|translate}}' ,required='')
                            span.text-danger(ng-show="utils.vinput(this.theForm,'name','required')") {{ "validator.REQUIRED" | translate}}
                        .col-md-10(ng-if="vm.readonly")
                            .form-readable {{vm.model.name}}
                    fieldset: .form-group
                        <!--身份证号-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-LABEL-ID_NO') | translate}}:
                        .col-md-10
                            input(type='text',name='id_no',ng-model='vm.model.id_no',required='',maxlength="18",box-input,box-readonly="vm.readonly",ng-model-options="{debounce:500}",id-no2="{successEvent:true}",ui-validate-async="{serverSideCheck: 'vm.serverSideCheck($value)'}")
                            span.text-danger(ng-show="utils.vinput(this.theForm,'id_no','required')") {{ "validator.REQUIRED" | translate}}
                            span.text-danger(ng-show="utils.vinput(this.theForm,'id_no','IDNo')") {{ "validator.ID-NO" | translate}}
                            span.text-danger(ng-show="utils.vinput(this.theForm,'id_no','serverSideCheck')") {{ "validator.SERVER-SIDE-CHECK" | translate:{item:vm.CheckBeforeAddEnterError} }}
                    fieldset: .form-group
                        <!--性别-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-LABEL-SEX') | translate}}:
                        .col-md-10(ng-if="!vm.readonly")
                            .btn-group
                                .btn.btn-primary(name='sex',ng-repeat='sex in vm.selectBinding.sex',ng-model='vm.model.sex',btn-radio="sex.value",required='',extract-sex="vm.model.id_no") {{sex.name}}
                            span.text-danger(ng-show="utils.vinput(this.theForm,'sex','required')") {{ "validator.REQUIRED" | translate}}
                        .col-md-10(ng-if="vm.readonly")
                            .btn-group
                                .btn.btn-primary.cursor-not-allowed(name='sex',ng-repeat='sex in vm.selectBinding.sex',ng-class="{'active':vm.model.sex==sex.value}") {{sex.name}}
                    fieldset: .form-group
                        <!--出生日期-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-LABEL-BIRTHDAY') | translate}}:
                        .col-md-2(ng-if="!vm.readonly")
                            .input-group
                                input.form-control(type="text",name='birthday',is-open="vm.openedDP",datepicker-popup="",ng-model="vm.model.birthday" ,placeholder='{{vm.viewTranslatePath("TAB1-PLACEHOLDER-BIRTHDAY")|translate}}',required='',ng-click="vm.openDP($event)",extract-birthday="vm.model.id_no")
                                span.input-group-btn
                                    button.btn.btn-primary(ng-click="vm.openDP($event)")
                                        i.glyphicon.glyphicon-calendar
                            span.text-danger(ng-show="utils.vinput(this.theForm,'birthday','required')") {{ "validator.REQUIRED" | translate}}
                            span.text-danger(ng-show="utils.vinput(this.theForm,'birthday','date')") {{ "validator.DATE" | translate}}
                        .col-md-2(ng-if="vm.readonly")
                            .form-readable {{vm.model.birthday|date}}
                    fieldset: .form-group
                        <!--婚姻情况-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-LABEL-MARRIAGE') | translate}}:
                        .col-md-10(ng-if="!vm.readonly")
                            .btn-group
                                .btn.btn-primary(name='marriage',ng-repeat='marriage in vm.selectBinding.marriages',ng-model='vm.model.marriage',btn-radio="marriage.value",required='') {{marriage.name}}
                            span.text-danger(ng-show="utils.vinput(this.theForm,'marriage','required')") {{ "validator.REQUIRED" | translate}}
                        .col-md-10(ng-if="vm.readonly")
                            .btn-group
                                .btn.btn-primary.cursor-not-allowed(name='marriage',ng-repeat='marriage in vm.selectBinding.marriages',ng-class="{'active':vm.model.marriage==marriage.value}") {{marriage.name}}
                    fieldset: .form-group
                        <!--家庭住址-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-LABEL-HOME_ADDRESS') | translate}}:
                        .col-md-10(ng-if="!vm.readonly")
                            input.form-control(type='text', name='home_address',ng-model='vm.model.home_address',placeholder='{{vm.viewTranslatePath("TAB1-PLACEHOLDER-HOME_ADDRESS")|translate}}' ,required='')
                            span.text-danger(ng-show="utils.vinput(this.theForm,'home_address','required')") {{ "validator.REQUIRED" | translate}}
                        .col-md-10(ng-if="vm.readonly")
                            .form-readable {{vm.model.home_address}}
                    fieldset: .form-group
                        <!--医保所在地-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-LABEL-MEDICAL_INSURANCE') | translate}}:
                        .col-md-10(ng-if="!vm.readonly")
                            .btn-group
                                .btn.btn-primary(name='medical_insurance',ng-repeat='medical_insurance in vm.selectBinding.medical_insurances',ng-model='vm.model.medical_insurance',btn-radio="medical_insurance.value",required='') {{medical_insurance.name}}
                            span.text-danger(ng-show="utils.vinput(this.theForm,'medical_insurance','required')") {{ "validator.REQUIRED" | translate}}
                        .col-md-10(ng-if="vm.readonly")
                            .btn-group
                                .btn.btn-primary.cursor-not-allowed(name='medical_insurance',ng-repeat='medical_insurance in vm.selectBinding.medical_insurances',ng-class="{'active':vm.model.medical_insurance==medical_insurance.value}") {{medical_insurance.name}}
                    fieldset: .form-group
                        <!--政治面貌-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-LABEL-POLITICS_STATUS') | translate}}:
                        .col-md-10(ng-if="!vm.readonly")
                            .btn-group
                                .btn.btn-primary(name='politics_status',ng-repeat='politics_status in vm.selectBinding.politics_statuses',ng-model='vm.model.politics_status',btn-radio="politics_status.value",required='') {{politics_status.name}}
                            span.text-danger(ng-show="utils.vinput(this.theForm,'politics_status','required')") {{ "validator.REQUIRED" | translate}}
                        .col-md-10(ng-if="vm.readonly")
                            .btn-group
                                .btn.btn-primary.cursor-not-allowed(name='politics_status',ng-repeat='politics_status in vm.selectBinding.politics_statuses',ng-class="{'active':vm.model.politics_status==politics_status.value}") {{politics_status.name}}
                    fieldset: .form-group
                        <!--居住状况-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-LABEL-INHABIT_STATUS') | translate}}:
                        .col-md-10(ng-if="!vm.readonly")
                            .btn-group
                                .btn.btn-primary(name='inhabit_status',ng-repeat='inhabit_status in vm.selectBinding.inhabit_statuses',ng-model='vm.model.inhabit_status',btn-radio="inhabit_status.value",required='') {{inhabit_status.name}}
                            span.text-danger(ng-show="utils.vinput(this.theForm,'inhabit_status','required')") {{ "validator.REQUIRED" | translate}}
                        .col-md-10(ng-if="vm.readonly")
                            .btn-group
                                .btn.btn-primary.cursor-not-allowed(name='inhabit_status',ng-repeat='inhabit_status in vm.selectBinding.inhabit_statuses',ng-class="{'active':vm.model.inhabit_status==inhabit_status.value}") {{inhabit_status.name}}
                    fieldset: .form-group
                        <!--经济状况-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-LABEL-FINANCIAL_STATUS') | translate}}:
                        .col-md-10(ng-if="!vm.readonly")
                            .btn-group
                                .btn.btn-primary(name='financial_status',ng-repeat='financial_status in vm.selectBinding.financial_statuses',ng-model='vm.model.financial_status',btn-radio="financial_status.value",required='') {{financial_status.name}}
                            span.text-danger(ng-show="utils.vinput(this.theForm,'financial_status','required')") {{ "validator.REQUIRED" | translate}}
                        .col-md-10(ng-if="vm.readonly")
                            .btn-group
                                .btn.btn-primary.cursor-not-allowed(name='financial_status',ng-repeat='financial_status in vm.selectBinding.financial_statuses',ng-class="{'active':vm.model.financial_status==financial_status.value}") {{financial_status.name}}
                    fieldset: .form-group
                        <!--特长爱好-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-LABEL-HOBBIES') | translate}}:
                        .col-md-10
                            .tree.tree-dropdown(name='hobbies',s-tree,s-tree-data="vm.hobbiesPromise",s-tree-height="200", s-tree-template-url='tree-directive-default-renderer.html',s-tree-option="{mode:'check',layout:'dropdown',readonly:{{vm.readonly}}}",ng-model="vm.model.hobbies",required='')
                            span.text-danger(ng-show="utils.vinput(this.theForm,'hobbies','required')") {{ "validator.REQUIRED" | translate}}
                    fieldset: .form-group
                        <!--过往病史-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-LABEL-MEDICAL_HISTORIES') | translate}}:
                        .col-md-10
                            .tree.tree-dropdown(name='medical_histories',s-tree,s-tree-data="vm.medical_historiesPromise",s-tree-height="200", s-tree-template-url='tree-directive-default-renderer.html',s-tree-option="{mode:'check',layout:'dropdown',readonly:{{vm.readonly}} }",ng-model="vm.model.medical_histories",required='')
                            span.text-danger(ng-show="utils.vinput(this.theForm,'medical_histories','required')") {{ "validator.REQUIRED" | translate}}
                    fieldset: .form-group
                        <!--备注-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-LABEL-REMARK') | translate}}:
                        .col-md-10(ng-if="!vm.readonly")
                            textarea.form-control(name='remark',ng-model='vm.model.remark',placeholder='{{vm.viewTranslatePath("TAB1-PLACEHOLDER-REMARK")|translate}}',maxlength="400")
                        .col-md-10(ng-if="vm.readonly")
                            .form-readable {{vm.model.remark}}
                    fieldset: .form-group
                        <!--饮食套餐-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-BOARD-INFO') | translate}}:
                        .col-md-6
                            .form-readable {{vm.model.board_summary}}
                        .col-md-4
                            button.btn.btn-primary.pull-left(ng-if="vm.readonly && !vm.model.begin_exit_flow",type="button",ng-click="vm.changeBoard()") {{'button.CHANGE'|translate}}
                    fieldset: .form-group
                        <!--护理信息-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-NURSING-INFO') | translate}}:
                        .col-md-6
                            .form-readable {{vm.model.nursing_summary}}
                        .col-md-4
                            button.btn.btn-primary.pull-left(ng-if="vm.readonly && !vm.model.begin_exit_flow",type="button",ng-click="vm.changeNursing()") {{'button.CHANGE'|translate}}
                    fieldset: .form-group
                        <!--床位信息-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-ROOM-INFO') | translate}}:
                        .col-md-6
                            .form-readable {{vm.model.room_summary}}
                        .col-md-4
                            button.btn.btn-primary.pull-left(ng-if="vm.readonly && !vm.model.begin_exit_flow",type="button",ng-click="vm.changeRoom()") {{'button.CHANGE'|translate}}
                    fieldset: .form-group
                        <!--其他费用与特色服务-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB1-OTHER-AND-CUSTOMIZED-INFO') | translate}}:
                        .col-md-6
                            .form-readable {{vm.other_and_customized}}
                        .col-md-4
                            button.btn.btn-primary.pull-left(ng-if="vm.readonly && !vm.model.begin_exit_flow",type="button",ng-click="vm.changeOtherAndCustomized()") {{'button.CHANGE'|translate}}
                    .panel.panel-default.panel-grid(ng-if="vm.readonly")
                        .panel-heading-normal
                            a {{ vm.viewTranslatePath('TAB1-ROOM-OCCUPANCY-CHANGE-HISTORY') | translate}}
                        table.grid.table.table-bordered.table-hover.table-striped
                            thead
                                tr
                                    th.text-center(width="120")
                                        | {{ vm.viewTranslatePath('TAB1-ROOM-OCCUPANCY-CHANGE-HISTORY-ROOM_SUMMARY') | translate}}
                                    th.text-center(width="40")
                                        | {{ vm.viewTranslatePath('TAB1-ROOM-OCCUPANCY-CHANGE-HISTORY-IN_FLAG') | translate}}
                                    th.text-center(width="40")
                                        | {{ vm.viewTranslatePath('TAB1-ROOM-OCCUPANCY-CHANGE-HISTORY-CHECK_IN_TIME') | translate}}
                                    th.text-center(width="40")
                                        | {{ vm.viewTranslatePath('TAB1-ROOM-OCCUPANCY-CHANGE-HISTORY-CHECK_OUT_TIME') | translate}}
                            tbody
                                tr(ng-repeat="row in vm.elderlyRoomOccupancyChangeHistoryRows|orderBy:'-check_in_time'")
                                    td {{::row.room_summary}}
                                    td.text-center {{::row.in_flag?(vm.viewTranslatePath('TAB1-ROOM-OCCUPANCY-CHANGE-HISTORY-IN_FLAG-TRUE')|translate):(vm.viewTranslatePath('TAB1-ROOM-OCCUPANCY-CHANGE-HISTORY-IN_FLAG-FALSE')) | translate }}
                                    td.text-center {{::row.check_in_time|date:'yyyy-MM-dd HH:mm:ss'}}
                                    td.text-center {{::row.check_out_time|date:'yyyy-MM-dd HH:mm:ss'}}
                        .panel-footer
                    fieldset: .form-group
                    .panel.panel-default.panel-grid
                        .panel-heading-normal
                            a {{ vm.viewTranslatePath('TAB1-LABEL-FAMILY-MEMBER') | translate}}
                        table.grid.table.table-bordered.table-hover.table-striped
                            thead
                                tr
                                    th.text-center(ng-if="!vm.readonly",check-all,width="30")
                                        .checkbox.c-checkbox(data-toggle="tooltip",data-title="Check All")
                                            label(ng-click="vm.checkElderlyFamilyMemberAll($event)")
                                                input(type='checkbox')
                                                span.fa.fa-check
                                    th.text-center(width="60")
                                        | {{ vm.viewTranslatePath('TAB1-LABEL-FAMILY-MEMBER-NAME') | translate}}
                                    th.text-center(width="100")
                                        | {{ vm.viewTranslatePath('TAB1-LABEL-FAMILY-MEMBER-ID_NO') | translate}}
                                    th.text-center(width="50")
                                        | {{ vm.viewTranslatePath('TAB1-LABEL-FAMILY-MEMBER-SEX') | translate}}
                                    th.text-center(width="80")
                                        | {{ vm.viewTranslatePath('TAB1-LABEL-FAMILY-MEMBER-RELATION_WITH') | translate}}
                                    th.text-center(width="80")
                                        | {{ vm.viewTranslatePath('TAB1-LABEL-FAMILY-MEMBER-PHONE') | translate}}
                                    th.text-center(width="200")
                                        | {{ vm.viewTranslatePath('TAB1-LABEL-FAMILY-MEMBER-ADDRESS') | translate}}
                                    th.text-center(width="50",ng-if="!vm.readonly")
                            tbody
                                tr(ng-repeat="row in vm.model.family_members" ng-click="vm.grid.selectRow($event,row)",ng-dblclick="vm.grid.dblclickRow(row.id)")
                                    td.text-center(ng-if="!vm.readonly")
                                        .checkbox.c-checkbox(ng-if="!row.$editing")
                                            label
                                                input(type='checkbox',ng-model="row.checked" )
                                                span.fa.fa-check
                                    td.text-left
                                        span(ng-if="!row.$editing") {{::row.name}}
                                        input.form-control(name="row$name",type="text",ng-if="row.$editing",ng-model='row.name',placeholder='{{vm.viewTranslatePath("TAB1-PLACEHOLDER-FAMILY-MEMBER-NAME")|translate}}' ,required='')
                                        span.text-danger(ng-if="row.$editing",ng-show="utils.vinput(this.theForm,'row$name','required')") {{ "validator.REQUIRED" | translate}}
                                    td.text-left
                                        span(ng-if="!row.$editing") {{::row.id_no}}
                                        input.form-control(name="row$id_no",type="text",ng-if="row.$editing",ng-model='row.id_no',placeholder='{{vm.viewTranslatePath("TAB1-PLACEHOLDER-FAMILY-MEMBER-ID_NO")|translate}}',id-no2)
                                        span.text-danger(ng-if="row.$editing",ng-show="utils.vinput(this.theForm,'row$id_no','IDNo')") {{ "validator.ID-NO" | translate}}
                                    td.text-center
                                        span(ng-if="!row.$editing") {{::row.sex|diFilter:vm.selectBinding.sex}}
                                        .dropdown(ng-if="row.$editing",s-dropdown,is-button,ng-model="row.sex",s-dropdown-data="vm.selectBinding.sex")
                                    td.text-center
                                        span(ng-if="!row.$editing") {{::row.relation_with|diFilter:vm.selectBinding.relationsWithTheElderly}}
                                        .dropdown(ng-if="row.$editing",s-dropdown,is-button,ng-model="row.relation_with",s-dropdown-data="vm.selectBinding.relationsWithTheElderly")
                                    td.text-left
                                        span(ng-if="!row.$editing") {{::row.phone}}
                                        input.form-control(name="row$phone",type="text",ng-if="row.$editing",ng-model='row.phone',placeholder='{{vm.viewTranslatePath("TAB1-PLACEHOLDER-FAMILY-MEMBER-PHONE")|translate}}' ,required='',ng-model-options="{debounce:500}",ui-validate="{phone: 'utils.isPhone($value)'}")
                                        span.text-danger(ng-if="row.$editing",ng-show="utils.vinput(this.theForm,'row$phone','required')") {{ "validator.REQUIRED" | translate}}
                                        span.text-danger(ng-if="row.$editing",ng-show="utils.vinput(this.theForm,'row$phone','phone')") {{ "validator.FORMAT" | translate:{item:"手机号码"} }}
                                    td.text-left
                                        span(ng-if="!row.$editing") {{::row.address}}
                                        input.form-control(type="text",ng-if="row.$editing",ng-model='row.address',placeholder='{{vm.viewTranslatePath("TAB1-PLACEHOLDER-FAMILY-MEMBER-ADDRESS")|translate}}' ,required='')
                                    td(ng-if="!vm.readonly")
                                        .btn-group(ng-if="!vm.readonly && !row.$editing")
                                            a.btn.btn-primary.btn-xs(title="{{'button.EDIT'|translate}}",ng-click="vm.editElderlyFamilyMember(row)")
                                                i.glyphicon.glyphicon-pencil
                                        .btn-group(ng-if="row.$editing")
                                            a.btn.btn-primary.btn-xs(title="{{'button.SAVE'|translate}}",ng-click="vm.saveElderlyFamilyMember(row)")
                                                i.glyphicon.glyphicon-ok-sign
                                        .btn-group(ng-if="row.$editing")
                                            a.btn.btn-primary.btn-xs(title="{{'button.CANCEL'|translate}}",ng-click="vm.cancelElderlyFamilyMember(row)")
                                                i.glyphicon.glyphicon-remove-sign
                        .panel-footer
                            .row
                                .col-md-4.text-left
                                    .btn-toolbar(ng-if="!vm.readonly")
                                        .btn-group
                                            a.btn.btn-primary.btn-sm(title="{{'button.ADD'|translate}}",ng-click="vm.addElderlyFamilyMember()")
                                                i.glyphicon.glyphicon-plus
                                            a.btn.btn-primary.btn-sm(title="{{'button.REMOVE'|translate}}",ng-click="vm.removeElderlyFamilyMember()")
                                                i.glyphicon.glyphicon-minus
            tab(active="vm.tab2.active",ng-if="vm.readonly")
                tab-heading
                    | {{ vm.viewTranslatePath('TAB2') | translate}}
                    span.text-danger(title="{{'validator.FIELD-INVALID'|translate}}" , ng-show="utils.vtab('contentTab2')")
                        i.glyphicon.glyphicon-minus-sign
                div#contentTab2
                    fieldset: .form-group
                        <!--收费项目-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB2-CHARGE-ITEM') | translate}}:
                        .col-md-10
                            ul.charge-item-in-enter
                                li.charge-item-level-one
                                    span {{ vm.viewTranslatePath('TAB2-CHARGE-PERIOD-PRICE-SUM') | translate}} {{vm.sumPeriodPrice()|currency}} / {{ vm.viewTranslatePath('TAB2-PERIOD-MONTH') | translate }}
                                li.charge-item-level-two.selected(ng-repeat='charge_item in vm.model.charge_items')
                                    .row
                                        .col-md-6
                                            span {{charge_item.item_name | translate}}
                                        .col-md-6
                                            span {{charge_item.period_price|currency}} / {{vm.period_map[charge_item.period]}}
                    fieldset: .form-group
                        <!--老人账户-->
                        label.col-md-2.control-label {{ vm.viewTranslatePath('TAB2-LABEL-SUBSIDIARY_LEDGER') | translate}}:
                        .col-md-10
                            .row
                                .col-md-6
                                    .input-group
                                        label.input-group-addon {{ vm.viewTranslatePath('TAB2-LABEL-SUBSIDIARY_LEDGER-SELF') | translate}}
                                        .form-control
                                            span(ng-class='{"text-primary":vm.model.subsidiary_ledger.self >= 0,"text-danger":vm.model.subsidiary_ledger.self<0}') {{vm.model.subsidiary_ledger.self | currency}}
                                .col-md-6
                                    .input-group
                                        label.input-group-addon {{ vm.viewTranslatePath('TAB2-LABEL-SUBSIDIARY_LEDGER-GOV_SUBSIDY') | translate}}
                                        .form-control
                                            span(ng-class='{"text-primary":vm.model.subsidiary_ledger.gov_subsidy >= 0,"text-danger":vm.model.subsidiary_ledger.gov_subsidy<0}') {{vm.model.subsidiary_ledger.gov_subsidy | currency}}
                    .panel.panel-default.panel-grid
                        .panel-heading-normal
                            a {{ vm.viewTranslatePath('TAB2-LABEL-JOURNAL_ACCOUNT') | translate}} {{vm.subGrid['journal_account'].sort.column}}
                        table.grid.table.table-bordered.table-hover.table-striped
                            thead
                                tr
                                    th.text-center(width="120")
                                        | {{ vm.viewTranslatePath('TAB2-LABEL-JOURNAL_ACCOUNT-CHECK_IN_TIME') | translate}}
                                    th.text-center(width="80")
                                        | {{ vm.viewTranslatePath('TAB2-LABEL-JOURNAL_ACCOUNT-VOUCHER_NO') | translate}}
                                    th.text-center(width="120")
                                        | {{ vm.viewTranslatePath('TAB2-LABEL-JOURNAL_ACCOUNT-REVENUE_AND_EXPENDITURE_TYPE') | translate}}
                                    th.text-center(width="200")
                                        | {{ vm.viewTranslatePath('TAB2-LABEL-JOURNAL_ACCOUNT-DIGEST') | translate}}
                                    th.text-center(width="100")
                                        | {{ vm.viewTranslatePath('TAB2-LABEL-JOURNAL_ACCOUNT-AMOUNT') | translate}}
                            tbody
                                tr(ng-repeat="row in vm.subGrid['journal_account'].rows|orderBy:vm.subGrid['journal_account'].sort.column:vm.subGrid['journal_account'].sort.direction===-1|paging:vm.subGrid['journal_account']",ng-init="revenue_and_expenditure_type_Prefix=row.revenue_and_expenditure_type.substr(0,1)")
                                    td.text-center {{::row.check_in_time|date:'yyyy-MM-dd HH:mm:ss'}}
                                    td.text-center(ng-class='{"financial-voucher_no-for-red":row.red_flag}') {{::row.voucher_no}}
                                    td.text-center {{::row.revenue_and_expenditure_type|diFilter:vm.selectBinding.revenue_and_expenditure_types}}
                                    td {{::row.digest}}
                                    td.text-right(ng-class='{"financial-receipts":(!row.red_flag && revenue_and_expenditure_type_Prefix=="A"),"financial-disbursements":(!row.red_flag && revenue_and_expenditure_type_Prefix=="B"),"financial-set-red":row.red_flag}') {{::row.amount|currency}}
                        .panel-footer
                            .row
                                .col-md-4.text-left
                                    .btn-toolbar(ng-if="vm.readonly")
                                        .btn-group
                                            a.btn.btn-primary.btn-sm(title="{{'button.REFRESH'|translate}}",ng-click="vm.refreshJournalAccount()")
                                                i.glyphicon.glyphicon-refresh
                                .col-md-8
                                    pagination.pagination-sm.pull-right(total-items="vm.subGrid['journal_account'].page.totals",ng-model="vm.subGrid['journal_account'].page.no",max-size="5",items-per-page="vm.subGrid['journal_account'].page.size",boundary-links="true" ,ng-change="vm.subGrid['journal_account'].paging()")
    .text-right.mt-lg
        button.btn.btn-danger.pull-left(ng-if="vm.readonly && !vm.model.begin_exit_flow",type="button",ng-click="vm.submitApplicationToExit()") {{'button.EXIT-ENTRY'|translate}}
        button.btn.btn-primary(ng-if="vm.readonly && !vm.model.begin_exit_flow",type="button",ng-click="vm.toEditView()") {{'button.EDIT'|translate}}
        button.btn.btn-warning(ng-if="!vm.readonly",type="button",ng-click="vm.cancel()") {{'button.CANCEL'|translate}}
        button.btn.btn-success(ng-if="!vm.readonly",type="submit") {{'button.SAVE'|translate}}
        button.btn.btn-primary(ng-if="vm.readonly",type="button",ng-click="vm.toListView()") {{'button.RETURN'|translate}}
    .text-left.mt-lg

script(type="text/ng-template", id="change-elderly-charge-item.html")
    form.form-validate.mb-lg(role='form', name="theForm", novalidate='', ng-submit="vm.doSubmit()")
        .ngdialog-message
            h3.mt0 {{ vm.title | translate}}
                span.text-120.text-primary.ml-lg {{vm.selected_charge_item.period_price|currency}} / {{ vm.viewTranslatePath('TAB2-PERIOD-MONTH') | translate }}
                span.text-120.text-danger(ng-if="vm.new_charge_item && vm.new_charge_item.item_id != vm.selected_charge_item.item_id") -> {{vm.new_charge_item.period_price|currency}} / {{ vm.viewTranslatePath('TAB2-PERIOD-MONTH') | translate }}
        .ngdialog-input
            fieldset: .form-group
                .col-md-12
                    .btn-group
                        .btn.btn-primary(name='charge_item',ng-repeat='charge_item in vm.selectBinding.elderly_charge_items',ng-model='vm.charge_item_id',ng-click='vm.setChargeItem(charge_item)',btn-radio="charge_item.item_id",required='') {{charge_item.item_name}}
                    span.text-danger(ng-show="utils.vinput(this.theForm,'charge_item','required')") {{ "validator.REQUIRED" | translate}}
        .ngdialog-buttons
            .alert.alert-danger.text-center(ng-show='vm.authMsg') {{vm.authMsg}}
            .row
                .col-md-9
                .col-md-3
                    button.btn.btn-success(type='submit') {{ "button.SAVE" | translate}}
script(type="text/ng-template", id="change-elderly-room-info.html")
    form.form-validate.mb-lg(role='form', name="theForm", novalidate='', ng-submit="vm.doSubmit()")
        .ngdialog-message
            h3.mt0 {{ vm.title | translate}}
                span.text-120.text-primary.ml-lg {{vm.selected_charge_item.period_price|currency}} / {{ vm.viewTranslatePath('TAB2-PERIOD-MONTH') | translate }}
                span.text-120.text-danger(ng-if="vm.new_charge_item && vm.new_charge_item.item_id != vm.selected_charge_item.item_id") -> {{vm.new_charge_item.period_price|currency}} / {{ vm.viewTranslatePath('TAB2-PERIOD-MONTH') | translate }}
        .ngdialog-input
            .tree.tree-tile(ng-if='!vm.treeHidden',s-tree,s-tree-data="vm.treeData",s-tree-node-is-disabled="vm.isDisabled(node)",s-tree-node-func="vm.getOccupyElderlyName(node)",s-tree-height="300", s-tree-template-url='tree-room-tile-renderer.html',s-tree-option="{layout:'tile'}", ng-model="vm.room_info",required='')
        .ngdialog-buttons
            .row
                .col-md-10
                    .alert-danger.text-center(ng-show='vm.authMsg') {{vm.authMsg}}
                .col-md-2
                    button.btn.btn-success(type='submit') {{ "button.SAVE" | translate}}
script(type="text/ng-template", id="change-elderly-charge-item-for-other-and-customized.html")
    form.form-validate.mb-lg(role='form', name="theForm", novalidate='', ng-submit="vm.doSubmit()")
        .ngdialog-message
            h3.mt0 {{ vm.title | translate}}
                span.text-120.text-primary.ml-lg {{vm.rawSumedPeriodPrice |currency}} / {{ vm.viewTranslatePath('TAB2-PERIOD-MONTH') | translate }}
                span.text-120.text-danger(ng-if="vm.isChanged()") -> {{vm.sumPeriodPrice()|currency}} / {{ vm.viewTranslatePath('TAB2-PERIOD-MONTH') | translate }}
        .ngdialog-input
            ul.charge-item-of-other-and-customized(ng-repeat='charge_item_level_one in vm.selectedChargeItemCatalogs')
                li.charge-item-level-one
                    span {{charge_item_level_one._id | translate}}
                li.charge-item-level-two( ng-class='{"selected":vm.isSelected(charge_item_level_two) }', ng-repeat='charge_item_level_two in charge_item_level_one.children')
                    .row
                        .col-md-1
                            .checkbox.c-checkbox(ng-if="!vm.readonly && charge_item_level_two.data && charge_item_level_two.data.manual_seletable")
                                label
                                    input(type='checkbox',ng-model="vm.selectionOfManualSelectable[charge_item_level_two.item_id]" )
                                    span.fa.fa-check
                        .col-md-5
                            span {{ (charge_item_level_two.item_id | translate) == charge_item_level_two.item_id ? charge_item_level_two.item_name: (charge_item_level_two.item_id | translate) }}
                        .col-md-6
                            span {{charge_item_level_two.period_price|currency}} / {{vm.period_map[charge_item_level_two.period]}}
        .ngdialog-buttons
            .row
                .col-md-10
                    .alert-danger.text-center(ng-show='vm.authMsg') {{vm.authMsg}}
                .col-md-2
                    button.btn.btn-success(type='submit') {{ "button.SAVE" | translate}}